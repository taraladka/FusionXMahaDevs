(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{5368:function(e,t,s){Promise.resolve().then(s.bind(s,2253))},2253:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(3827),i=s(4090),r=s(7907),n=s(8792),l=s(6173),o=s(2788),c=s(3141),d=s(8693),m=s(1991);let h=["Workshop","Hackathon","Competition","Webinar","Tech Talk","Conference","Networking","Other"],x=m.Ry().shape({title:m.Z_().min(5,"Title must be at least 5 characters").max(100,"Title must be less than 100 characters").required("Title is required"),date:m.hT().required("Date is required"),time:m.Z_().required("Time is required"),location:m.Z_().required("Location is required"),description:m.Z_().min(20,"Description must be at least 20 characters").required("Description is required"),category:m.Z_().required("Category is required"),imageUrl:m.Z_().url("Must be a valid URL").required("Image URL is required"),additionalInfo:m.Z_().min(10,"Additional info must be at least 10 characters"),registrationLink:m.Z_().url("Must be a valid URL")}),u={1:{id:"1",title:"Tech Talk",date:"2025-02-11",time:"14:30",location:"Main Auditorium",description:"Join us for an exciting tech talk about the latest advancements in artificial intelligence and machine learning. Our guest speakers will share insights about the future of technology.",category:"Tech Talk",imageUrl:"https://images.unsplash.com/photo-1555949963-aa79dcee981c?q=80&w=1470&auto=format&fit=crop"},2:{id:"2",title:"Fusion X",date:"2025-04-04",time:"09:00",location:"Innovation Hub",description:"Fusion X is our annual flagship event bringing together the best minds in technology. Participate in coding challenges, attend workshops, and network with industry professionals.",category:"Conference",imageUrl:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?q=80&w=1470&auto=format&fit=crop"}};function f(e){let{params:t}=e,{id:s}=t,{user:m,isLoading:f}=(0,o.a)(),p=(0,r.useRouter)(),[g,N]=(0,i.useState)(null),[j,v]=(0,i.useState)(!1),[b,y]=(0,i.useState)(""),[w,k]=(0,i.useState)(""),[E,T]=(0,i.useState)(!1),I=(0,i.useRef)(null),L=(0,i.useRef)(null),q=()=>{I.current&&(I.current.focus(),"function"==typeof I.current.showPicker?I.current.showPicker():I.current.click())},S=()=>{L.current&&(L.current.focus(),"function"==typeof L.current.showPicker?L.current.showPicker():L.current.click())};(0,i.useEffect)(()=>{if(!m&&!f){p.push("/auth");return}let e=async()=>{try{await new Promise(e=>setTimeout(e,500));let e=localStorage.getItem("fusionEvents");if(!e){if(u[s]){let e={...u[s],additionalInfo:"",registrationLink:"",status:"Upcoming"};N(e)}else y("Event not found");T(!0);return}let t=JSON.parse(e).find(e=>e.id===s);if(t)N({...t,additionalInfo:t.additionalInfo||"",registrationLink:t.registrationLink||"",status:t.status||"Upcoming"});else if(u[s]){let e={...u[s],additionalInfo:"",registrationLink:"",status:"Upcoming"};N(e)}else y("Event not found");T(!0)}catch(e){console.error("Error fetching event:",e),y("Failed to load event"),T(!0)}};m&&!f&&e()},[m,f,s,p]);let U=async(e,t)=>{let{setSubmitting:a}=t;v(!0),y(""),k("");try{let t={...e,id:s,status:g.status||"Upcoming"},a=localStorage.getItem("fusionEvents");if(a){let e=JSON.parse(a).map(e=>e.id===s?t:e);localStorage.setItem("fusionEvents",JSON.stringify(e))}console.log("Event updated in localStorage:",t),await new Promise(e=>setTimeout(e,1e3)),k("Event updated successfully!"),setTimeout(()=>{p.push("/admin/dashboard")},2e3)}catch(e){console.error("Error updating event:",e),y("Failed to update event. Please try again.")}finally{v(!1)}};return f||!E?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-dark text-white",children:[(0,a.jsx)(c.Z,{}),(0,a.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"})})]}):m&&m.isAdmin?g?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-dark text-white",children:[(0,a.jsx)(c.Z,{}),(0,a.jsx)("div",{className:"flex-grow content-container",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,a.jsxs)(n.default,{href:"/admin/dashboard",className:"flex items-center text-gray-400 hover:text-white transition-colors mr-4",children:[(0,a.jsx)(l.Ao2,{className:"h-5 w-5 mr-1"}),(0,a.jsx)("span",{children:"Back to Dashboard"})]}),(0,a.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Edit Event: ",g.title]})]}),(0,a.jsxs)("div",{className:"glass-card p-6 rounded-lg shadow-custom",children:[b&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-500 rounded-md text-white",children:b}),w&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-900/50 border border-green-500 rounded-md text-white",children:w}),(0,a.jsx)(d.J9,{initialValues:{title:g.title,date:g.date,time:g.time,location:g.location,description:g.description,category:g.category,imageUrl:g.imageUrl,additionalInfo:g.additionalInfo||"",registrationLink:g.registrationLink||""},validationSchema:x,onSubmit:U,children:e=>{let{isValid:t,dirty:s,errors:i,touched:r}=e;return(0,a.jsxs)(d.l0,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{htmlFor:"title",className:"form-label",children:"Event Title"}),(0,a.jsx)(d.gN,{id:"title",name:"title",type:"text",className:"form-input",placeholder:"Enter a catchy title for your event"}),(0,a.jsx)(d.Bc,{name:"title",component:"div",className:"form-error"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"date",className:"form-label flex items-center",children:[(0,a.jsx)(l.vlc,{className:"mr-2 h-4 w-4 text-primary"}),"Event Date"]}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)(d.gN,{id:"date",name:"date",type:"date",className:"form-input pr-10",ref:I}),(0,a.jsx)("button",{type:"button",className:"absolute right-2 text-primary hover:text-primary/80",onClick:q,children:(0,a.jsx)(l.vlc,{className:"h-5 w-5"})})]}),(0,a.jsx)(d.Bc,{name:"date",component:"div",className:"form-error"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"time",className:"form-label flex items-center",children:[(0,a.jsx)(l.TCC,{className:"mr-2 h-4 w-4 text-primary"}),"Event Time"]}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)(d.gN,{id:"time",name:"time",type:"time",className:"form-input pr-10",ref:L}),(0,a.jsx)("button",{type:"button",className:"absolute right-2 text-primary hover:text-primary/80",onClick:S,children:(0,a.jsx)(l.TCC,{className:"h-5 w-5"})})]}),(0,a.jsx)(d.Bc,{name:"time",component:"div",className:"form-error"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"location",className:"form-label flex items-center",children:[(0,a.jsx)(l.i63,{className:"mr-2 h-4 w-4 text-primary"}),"Location"]}),(0,a.jsx)(d.gN,{id:"location",name:"location",type:"text",className:"form-input",placeholder:"Online or physical location"}),(0,a.jsx)(d.Bc,{name:"location",component:"div",className:"form-error"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category"}),(0,a.jsxs)(d.gN,{as:"select",id:"category",name:"category",className:"form-input",children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),h.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)(d.Bc,{name:"category",component:"div",className:"form-error"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("label",{htmlFor:"registrationLink",className:"form-label flex items-center",children:[(0,a.jsx)(l.XKb,{className:"mr-2 h-4 w-4 text-primary"}),"Registration Form Link (Google Form)"]}),(0,a.jsx)(d.gN,{id:"registrationLink",name:"registrationLink",type:"text",className:"form-input",placeholder:"https://forms.google.com/..."}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:'This link will be used when users click "Register Now" for your event'}),(0,a.jsx)(d.Bc,{name:"registrationLink",component:"div",className:"form-error"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("label",{htmlFor:"imageUrl",className:"form-label flex items-center",children:[(0,a.jsx)(l.LFN,{className:"mr-2 h-4 w-4 text-primary"}),"Event Image URL"]}),(0,a.jsx)(d.gN,{id:"imageUrl",name:"imageUrl",type:"text",className:"form-input",placeholder:"https://example.com/image.jpg"}),(0,a.jsx)(d.Bc,{name:"imageUrl",component:"div",className:"form-error"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{htmlFor:"description",className:"form-label",children:"Event Description"}),(0,a.jsx)(d.gN,{as:"textarea",id:"description",name:"description",rows:"6",className:"form-input",placeholder:"Describe your event in detail"}),(0,a.jsx)(d.Bc,{name:"description",component:"div",className:"form-error"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("label",{htmlFor:"additionalInfo",className:"form-label flex items-center",children:[(0,a.jsx)(l.H33,{className:"mr-2 h-4 w-4 text-primary"}),"Additional Info (shown when users click the Info button)"]}),(0,a.jsx)(d.gN,{as:"textarea",id:"additionalInfo",name:"additionalInfo",rows:"4",className:"form-input",placeholder:"Add any extra information that will be displayed when users click the info (i) button"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"This could include prerequisites, materials needed, or special instructions"}),(0,a.jsx)(d.Bc,{name:"additionalInfo",component:"div",className:"form-error"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{type:"submit",disabled:j||!t,className:"btn-primary flex items-center px-6 ".concat(j||!t?"opacity-70 cursor-not-allowed":""),children:[(0,a.jsx)(l.mW3,{className:"mr-2 h-5 w-5"}),j?"Saving...":"Save Changes"]})})]})}})]})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-dark text-white",children:[(0,a.jsx)(c.Z,{}),(0,a.jsx)("div",{className:"flex-grow content-container",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,a.jsxs)(n.default,{href:"/admin/dashboard",className:"flex items-center text-gray-400 hover:text-white transition-colors mr-4",children:[(0,a.jsx)(l.Ao2,{className:"h-5 w-5 mr-1"}),(0,a.jsx)("span",{children:"Back to Dashboard"})]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Edit Event"})]}),(0,a.jsxs)("div",{className:"glass-card p-6 rounded-lg shadow-custom",children:[(0,a.jsx)("div",{className:"p-4 bg-red-900/50 border border-red-500 rounded-md text-white",children:"Event not found. The event may have been deleted or you don't have permission to edit it."}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(n.default,{href:"/admin/dashboard",className:"btn-primary inline-flex items-center",children:[(0,a.jsx)(l.Ao2,{className:"mr-2 h-5 w-5"}),"Return to Dashboard"]})})]})]})})]}):null}function p(e){let{params:t}=e;return(0,a.jsx)(o.H,{children:(0,a.jsx)(f,{params:t})})}}},function(e){e.O(0,[982,956,63,429,831,141,971,69,744],function(){return e(e.s=5368)}),_N_E=e.O()}]);
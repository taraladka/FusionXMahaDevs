(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{8822:function(e,t,s){Promise.resolve().then(s.bind(s,3110))},3110:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(3827),a=s(4090),i=s(7907),l=s(8792),n=s(6173),c=s(2788),o=s(3141),m=s(8693),d=s(1991);let x=["Workshop","Hackathon","Competition","Webinar","Tech Talk","Conference","Networking","Other"],h=d.Ry().shape({title:d.Z_().min(5,"Title must be at least 5 characters").max(100,"Title must be less than 100 characters").required("Title is required"),date:d.hT().min(new Date,"Event date cannot be in the past").required("Date is required"),time:d.Z_().required("Time is required"),location:d.Z_().required("Location is required"),description:d.Z_().min(20,"Description must be at least 20 characters").required("Description is required"),category:d.Z_().required("Category is required"),imageUrl:d.Z_().url("Must be a valid URL").required("Image URL is required"),additionalInfo:d.Z_().min(10,"Additional info must be at least 10 characters"),registrationLink:d.Z_().url("Must be a valid URL")});function u(){let{user:e,isLoading:t}=(0,c.a)(),s=(0,i.useRouter)(),[d,u]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),[N,j]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),w=(0,a.useRef)(null),k=(0,a.useRef)(null),E=()=>{w.current&&(w.current.focus(),"function"==typeof w.current.showPicker?w.current.showPicker():w.current.click())},q=()=>{k.current&&(k.current.focus(),"function"==typeof k.current.showPicker?k.current.showPicker():k.current.click())};(0,a.useEffect)(()=>{t||e&&e.isAdmin||s.push("/auth")},[e,t,s]);let C=async(e,t)=>{let{resetForm:r}=t;u(!0),f(""),j("");try{let t={id:"event_".concat(Date.now()),...e,status:"Upcoming"},a=localStorage.getItem("fusionEvents"),i=[...a?JSON.parse(a):[],t];localStorage.setItem("fusionEvents",JSON.stringify(i)),console.log("Event created and saved to localStorage:",t),await new Promise(e=>setTimeout(e,1e3)),j("Event created successfully!"),r(),setTimeout(()=>{s.push("/admin/dashboard")},2e3)}catch(e){console.error("Error creating event:",e),f("Failed to create event. Please try again.")}finally{u(!1)}};return t?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-dark text-white",children:[(0,r.jsx)(o.Z,{}),(0,r.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"})})]}):e&&e.isAdmin?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-dark text-white",children:[(0,r.jsx)(o.Z,{}),(0,r.jsx)("div",{className:"flex-grow content-container",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,r.jsxs)(l.default,{href:"/admin/dashboard",className:"flex items-center text-gray-400 hover:text-white transition-colors mr-4",children:[(0,r.jsx)(n.Ao2,{className:"h-5 w-5 mr-1"}),(0,r.jsx)("span",{children:"Back to Dashboard"})]}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Create New Event"})]}),(0,r.jsxs)("div",{className:"glass-card p-6 rounded-lg shadow-custom",children:[p&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-500 rounded-md text-white",children:p}),N&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-green-900/50 border border-green-500 rounded-md text-white",children:N}),(0,r.jsx)(m.J9,{initialValues:{title:"",date:"",time:"",location:"",description:"",category:"",imageUrl:"",additionalInfo:"",registrationLink:""},validationSchema:h,onSubmit:C,children:e=>{let{isValid:t,dirty:s,errors:a,touched:i,setFieldValue:l}=e;return(0,r.jsxs)(m.l0,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("label",{htmlFor:"title",className:"form-label",children:"Event Title"}),(0,r.jsx)(m.gN,{id:"title",name:"title",type:"text",className:"form-input",placeholder:"Enter a catchy title for your event"}),(0,r.jsx)(m.Bc,{name:"title",component:"div",className:"form-error"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"date",className:"form-label flex items-center",children:[(0,r.jsx)(n.vlc,{className:"mr-2 h-4 w-4 text-primary"}),"Event Date"]}),(0,r.jsxs)("div",{className:"relative flex items-center",children:[(0,r.jsx)(m.gN,{id:"date",name:"date",type:"date",className:"form-input pr-10",ref:w}),(0,r.jsx)("button",{type:"button",className:"absolute right-2 text-primary hover:text-primary/80",onClick:E,children:(0,r.jsx)(n.vlc,{className:"h-5 w-5"})})]}),(0,r.jsx)(m.Bc,{name:"date",component:"div",className:"form-error"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"time",className:"form-label flex items-center",children:[(0,r.jsx)(n.TCC,{className:"mr-2 h-4 w-4 text-primary"}),"Event Time"]}),(0,r.jsxs)("div",{className:"relative flex items-center",children:[(0,r.jsx)(m.gN,{id:"time",name:"time",type:"time",className:"form-input pr-10",ref:k}),(0,r.jsx)("button",{type:"button",className:"absolute right-2 text-primary hover:text-primary/80",onClick:q,children:(0,r.jsx)(n.TCC,{className:"h-5 w-5"})})]}),(0,r.jsx)(m.Bc,{name:"time",component:"div",className:"form-error"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"location",className:"form-label flex items-center",children:[(0,r.jsx)(n.i63,{className:"mr-2 h-4 w-4 text-primary"}),"Location"]}),(0,r.jsx)(m.gN,{id:"location",name:"location",type:"text",className:"form-input",placeholder:"Online or physical location"}),(0,r.jsx)(m.Bc,{name:"location",component:"div",className:"form-error"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category"}),(0,r.jsxs)(m.gN,{as:"select",id:"category",name:"category",className:"form-input",children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),x.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)(m.Bc,{name:"category",component:"div",className:"form-error"})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsxs)("label",{htmlFor:"registrationLink",className:"form-label flex items-center",children:[(0,r.jsx)(n.XKb,{className:"mr-2 h-4 w-4 text-primary"}),"Registration Form Link (Google Form)"]}),(0,r.jsx)(m.gN,{id:"registrationLink",name:"registrationLink",type:"text",className:"form-input",placeholder:"https://forms.google.com/..."}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:'This link will be used when users click "Register Now" for your event'}),(0,r.jsx)(m.Bc,{name:"registrationLink",component:"div",className:"form-error"})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsxs)("label",{htmlFor:"imageUrl",className:"form-label flex items-center",children:[(0,r.jsx)(n.LFN,{className:"mr-2 h-4 w-4 text-primary"}),"Event Image URL"]}),(0,r.jsx)(m.gN,{id:"imageUrl",name:"imageUrl",type:"text",className:"form-input",placeholder:"https://example.com/image.jpg"}),(0,r.jsx)(m.Bc,{name:"imageUrl",component:"div",className:"form-error"})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("label",{htmlFor:"description",className:"form-label",children:"Event Description"}),(0,r.jsx)(m.gN,{as:"textarea",id:"description",name:"description",rows:"6",className:"form-input",placeholder:"Describe your event in detail"}),(0,r.jsx)(m.Bc,{name:"description",component:"div",className:"form-error"})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsxs)("label",{htmlFor:"additionalInfo",className:"form-label flex items-center",children:[(0,r.jsx)(n.H33,{className:"mr-2 h-4 w-4 text-primary"}),"Additional Info (shown when users click the Info button)"]}),(0,r.jsx)(m.gN,{as:"textarea",id:"additionalInfo",name:"additionalInfo",rows:"4",className:"form-input",placeholder:"Add any extra information that will be displayed when users click the info (i) button"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"This could include prerequisites, materials needed, or special instructions"}),(0,r.jsx)(m.Bc,{name:"additionalInfo",component:"div",className:"form-error"})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)("button",{type:"submit",disabled:d||!(t&&s),className:"btn-primary flex items-center px-6 ".concat(d||!(t&&s)?"opacity-70 cursor-not-allowed":""),children:[(0,r.jsx)(n.mW3,{className:"mr-2 h-5 w-5"}),d?"Creating...":"Create Event"]})})]})}})]})]})})]}):null}function p(){return(0,r.jsx)(c.H,{children:(0,r.jsx)(u,{})})}}},function(e){e.O(0,[982,956,63,429,831,141,971,69,744],function(){return e(e.s=8822)}),_N_E=e.O()}]);